<!DOCTYPE html>
<html lang="en"><head><title>Run a CMD command in Qt without displaying the CMD window | Theodore Cooper</title><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Run a CMD command in Qt without displaying the CMD window" /><meta name="author" content="Theodore Cooper" /><meta property="og:locale" content="en_us" /><meta name="description" content="It’s necessary to execute system commands sometime. system() is the most basic, it’s easy but cannot hide the black command line window, its options are not much enough. Here’re some better ways." /><meta property="og:description" content="It’s necessary to execute system commands sometime. system() is the most basic, it’s easy but cannot hide the black command line window, its options are not much enough. Here’re some better ways." /><link rel="canonical" href="https://theodorecooper.github.io/qt/c/c++/c%20tutorials/2021-qtcmd/" /><meta property="og:url" content="https://theodorecooper.github.io/qt/c/c++/c%20tutorials/2021-qtcmd/" /><meta property="og:site_name" content="Theodore Cooper" /><meta property="og:image" content="https://theodorecooper.github.io/assets/img/blog/qt-cmd/qt-logo.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-25T00:00:00+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://theodorecooper.github.io/assets/img/blog/qt-cmd/qt-logo.png" /><meta property="twitter:title" content="Run a CMD command in Qt without displaying the CMD window" /><meta name="twitter:site" content="@T_Ccooper" /><meta name="twitter:creator" content="@Theodore Cooper" /><meta name="msvalidate.01" content="F7959A0570D0607B4121B537616DDEAB" /> <script type="application/ld+json"> {"description":"It’s necessary to execute system commands sometime. system() is the most basic, it’s easy but cannot hide the black command line window, its options are not much enough. Here’re some better ways.","@type":"BlogPosting","image":"https://theodorecooper.github.io/assets/img/blog/qt-cmd/qt-logo.png","headline":"Run a CMD command in Qt without displaying the CMD window","dateModified":"2021-06-25T11:15:00+08:00","datePublished":"2021-06-25T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://theodorecooper.github.io/qt/c/c++/c%20tutorials/2021-qtcmd/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://theodorecooper.github.io/assets/img/logo.png"},"name":"Theodore Cooper"},"author":{"@type":"Person","name":"Theodore Cooper"},"url":"https://theodorecooper.github.io/qt/c/c++/c%20tutorials/2021-qtcmd/","@context":"https://schema.org"}</script><meta name="keywords" content="Qt,cmd,QProcess,WinExec,CreateProcess"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Theodore Cooper"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="application-name" content="Theodore Cooper"><meta name="theme-color" content="#ccc"><meta name="generator" content="Theodore Cooper" /><link rel="alternate" href="https://theodorecooper.github.io/qt/c/c++/c%20tutorials/2021-qtcmd/" hreflang="en-us"><link type="application/atom+xml" rel="alternate" href="https://theodorecooper.github.io/feed.xml" title="Theodore Cooper" /><link rel="shortcut icon" href="/assets/icons/favicon.ico"><link rel="manifest" href="/assets/site.webmanifest"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preload" href="/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG"><link rel="dns-prefetch" href="https://theodorecooper.disqus.com" id="_hrefDisqus"> <script>!function(r,c){"use strict";function a(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}r.loadJS=function(e,t){var n=c.createElement("script");n.src=e,t&&a(n,"load",t,{once:!0});t=c.scripts[0];return t.parentNode.insertBefore(n,t),n},r._loaded=!1,r.loadJSDeferred=function(e,t){var n=c.createElement("script");function o(){r._loaded=!0,t&&a(n,"load",t,{once:!0});var e=c.scripts[0];e.parentNode.insertBefore(n,e)}return n.src=e,r._loaded?o():a(r,"load",o,{once:!0}),n},r.setRel=r.setRelStylesheet=function(e){a(c.getElementById(e),"load",function(){this.rel="stylesheet"},{once:!0})}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); !function(w) { w._baseURL = '/'; w._publicPath = '/assets/js/'; w._noPushState = false; w._noDrawer = false; w._noNavbar = false; w._noToc = false; w._noSearch = false; w._search = { DATA_URL: '/assets/sitedata.json?no-cache', STORAGE_KEY: 'mini-search/', INDEX_KEY: 'index--2021-08-10T14:38:43+08:00', }; w._clapButton = false; }(window);</script> <script async src="/assets/bower_components/MathJax/es5/tex-mml-chtml.js" id="_MathJax"></script> <!--[if gt IE 8]><!----><style id="_styleInline"> .clearfix,.sidebar-social::after{content:"";display:table;clear:both}.color-transition,.content .avatar,.nav-btn,.nav-btn-bar,.navbar,.message,.note-sm,#markdown-toc,.note,.hr-bottom,.hr-after::after,hr,.hr,p,body{transition:none}html{--font-family: Noto Sans,Helvetica,Arial,sans-serif;--font-family-heading: Roboto Slab,Helvetica,Arial,sans-serif;--code-font-family: Fira Code,Menlo,Monaco,Consolas,monospace;--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: #282828;--root-font-size: 15px;--root-font-size-medium: 16px;--root-font-size-large: 17px;--root-font-size-print: 8pt;--root-line-height: 1.75;--font-weight: 400;--font-weight-bold: 700;--font-weight-heading: 700;--content-width-5: 54rem;--content-margin-5: 4rem;--sidebar-width: 21rem;--half-content: 31rem;--break-point-3: 64em;--break-point-5: 86em;--break-point-dynamic: 1664px}html .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-family:var(--font-family);font-size:var(--root-font-size);line-height:var(--root-line-height)}body{color:var(--body-color);background-color:var(--body-bg);font-weight:var(--font-weight);overflow-y:scroll}.content img,.img,.content video,.video{max-width:100%;height:auto}.lead{margin-left:-1rem;margin-right:-1rem;margin-bottom:1.5rem}img.lead,video.lead{display:block;max-width:calc(100% + 2rem);width:calc(100% + 2rem);height:auto}.heading,.f6,h6,.h6,.f5,h5,.h5,.f4,.sidebar-nav-item,h4,.h4,.post-date,.f3,h3,.h3,.f2,h2,.h2,.f1,h1,.h1{font-family:var(--font-family-heading);font-weight:var(--font-weight-heading)}.f1,h1,.h1{font-size:2rem;line-height:1.3}.f2,h2,.h2{font-size:1.5rem;line-height:1.4}.f3,h3,.h3{font-size:1.2em;line-height:1.5}.f4,.sidebar-nav-item,h4,.h4,.post-date{font-size:1.08rem;line-height:1.6}.f5,h5,.h5{font-size:1.04rem;line-height:1.7}.f6,h6,.h6{font-size:1rem}.content h1>a,.content .h1>a{text-decoration:none;border-bottom:none}@media screen and (max-width: 42em){.content h1,.content .h1{font-size:1.7rem;line-height:1.35}}@media screen and (min-width: 86em){.content h1,.content .h1{font-size:2.4rem;line-height:1.25}}@media screen and (min-width: 1664px){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{width:calc(100% + 50vw - 32rem);font-size:3rem;line-height:1.2}}@media screen and (min-width: 124em){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{font-size:4rem;line-height:1.1}}h1,h2,h3,.h1,.h2,.h3{margin:4rem 0 1rem}h4,h5,h6,.h4,.post-date,.h5,.h6{margin:3rem 0 .5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.2em;margin-top:1.5rem;margin-bottom:1.5rem;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr,.hr{border:0;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-after::after{content:"";display:block;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-bottom{border-bottom:1px solid var(--border-color);padding-bottom:.75rem;margin-bottom:1rem}.page{margin-bottom:3em}.page li+li{margin-top:.25rem}.page>header{position:relative;margin-bottom:1.5rem}@media screen and (min-width: 1664px){body:not(.no-third-column) .page>header>.lead+.note-sm,body:not(.no-third-column) .page>header>.lead+#markdown-toc,body:not(.no-third-column) .page>header>.lead+.note,body:not(.no-third-column) .page>header>a.no-hover+.note-sm,body:not(.no-third-column) .page>header>a.no-hover+#markdown-toc,body:not(.no-third-column) .page>header>a.no-hover+.note{position:absolute;right:-25rem;width:21rem;bottom:0;margin-bottom:0}}.page-title,.post-title{margin-top:0}.post-date{display:flex;justify-content:space-between;margin-top:-.6rem;height:2rem;margin-bottom:.85rem;color:var(--gray)}.post-date>.ellipsis,#breadcrumbs.post-date>ul{cursor:pointer}.post-date [class^="icon-"]{display:inline-block;font-size:smaller;margin-right:.25rem}.related-posts{padding-left:0;list-style:none;margin-bottom:2rem}.related-posts>li,.related-posts>li+li{margin-top:1rem}.message,.note-sm,#markdown-toc,.note{margin-bottom:1rem;padding:1rem;color:var(--gray-text);background-color:var(--gray-bg);margin-left:-1rem;margin-right:-1rem}.note-sm,#markdown-toc,.note{background:transparent;color:var(--body-color);font-size:smaller;border-left:1px solid var(--border-color);padding:1.2rem 1rem 0 1rem;margin:1rem -1rem;position:relative}.note-sm:before,#markdown-toc:before,.note:before{font-size:0.667rem;font-weight:bold;font-style:normal;letter-spacing:.025rem;text-transform:uppercase;color:var(--menu-text);position:absolute;top:0}.note-sm[title]:before,#markdown-toc[title]:before,.note[title]:before{content:attr(title) !important}.note{font-size:1rem}@media screen{body::before{content:'';width:.5rem;background:var(--gray-bg);position:fixed;left:0;top:0;bottom:0}}@media (min-width: 64em){body::before{width:21rem}}@media (min-width: 1664px){body::before{width:calc(50% - 31rem)}}@media screen and (min-width: 42em){html{font-size:var(--root-font-size-medium)}}@media screen and (min-width: 124em){html{font-size:var(--root-font-size-large)}}#breadcrumbs>ul{height:1rem;margin:-1.5rem 0 .5rem;padding:0;font-size:.667rem;color:var(--menu-text);text-transform:uppercase;width:100%;list-style:none}#breadcrumbs>ul>li{display:inline}#breadcrumbs>ul>li a{color:var(--gray);text-decoration:none;border-bottom:none}.fl{float:left}.fr{float:right}.mb4{margin-bottom:4rem}.mb6{margin-bottom:6rem}.mt0{margin-top:0}.mt1{margin-top:1rem}.mt2{margin-top:2rem}.mt3{margin-top:3rem}.mt4{margin-top:4rem}.pb0{padding-bottom:0}.ml1{margin-left:1rem}.mr1{margin-right:1rem}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}.sixteen-ten{position:relative}.sixteen-ten::before{display:block;content:"";width:100%;padding-top:62.5%}.sixteen-ten>*{position:absolute;top:0;left:0;right:0;bottom:0}.four-three{position:relative}.four-three::before{display:block;content:"";width:100%;padding-top:75%}.four-three>*{position:absolute;top:0;left:0;right:0;bottom:0}.sr-only{display:none}.larger{font-size:larger}.smaller{font-size:smaller}.clearfix,.sidebar-social::after{content:"";display:table;clear:both}.ellipsis,#breadcrumbs>ul{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.border{border:1px solid var(--border-color)}@media (min-width: 42em){.border-radius,.lead,.page .aspect-ratio.sixteen-nine.lead{border-radius:.5rem}}.fallback-img{background-position:center;background-repeat:no-repeat;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjkwIiB2aWV3Qm94PSIwIDAgMTYwIDkwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDQ4ODI4LCAwLCAwLCAwLjA0Nzk5MSwgNTQuOTk5OTczLCAyMC40MjgxNDgpIj4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTk1OS44ODQgMTI4YzAuMDQwIDAuMDM0IDAuMDgyIDAuMDc2IDAuMTE2IDAuMTE2djc2Ny43N2MtMC4wMzQgMC4wNDAtMC4wNzYgMC4wODItMC4xMTYgMC4xMTZoLTg5NS43N2MtMC4wNDAtMC4wMzQtMC4wODItMC4wNzYtMC4xMTQtMC4xMTZ2LTc2Ny43NzJjMC4wMzQtMC4wNDAgMC4wNzYtMC4wODIgMC4xMTQtMC4xMTRoODk1Ljc3ek05NjAgNjRoLTg5NmMtMzUuMiAwLTY0IDI4LjgtNjQgNjR2NzY4YzAgMzUuMiAyOC44IDY0IDY0IDY0aDg5NmMzNS4yIDAgNjQtMjguOCA2NC02NHYtNzY4YzAtMzUuMi0yOC44LTY0LTY0LTY0djB6Ii8+CiAgICA8cGF0aCBzdHlsZT0iZmlsbDpyZ2JhKDEyOCwxMjgsMTI4LC4zMykiIGQ9Ik04MzIgMjg4YzAgNTMuMDIwLTQyLjk4IDk2LTk2IDk2cy05Ni00Mi45OC05Ni05NiA0Mi45OC05NiA5Ni05NiA5NiA0Mi45OCA5NiA5NnoiLz4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTg5NiA4MzJoLTc2OHYtMTI4bDIyNC0zODQgMjU2IDMyMGg2NGwyMjQtMTkyeiIvPgogIDwvZz4KPC9zdmc+")}hy-push-state a{color:var(--body-color)}@supports not ((text-decoration-thickness: initial) and (text-underline-offset: initial)){hy-push-state a{text-decoration:none;border-bottom:2px solid}}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){hy-push-state a{text-decoration-style:solid;text-underline-offset:.35rem;text-decoration-thickness:2px}}hy-push-state a.no-hover{border-bottom:none;text-decoration-thickness:unset;text-underline-offset:unset}.content a:not(.btn):not(.no-hover){border-color:var(--accent-color-faded)}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){.content a:not(.btn):not(.no-hover){text-decoration-color:var(--accent-color-faded)}}.content .aspect-ratio{overflow:hidden}.content .aspect-ratio img{margin:0;width:100%;height:100%;background-color:var(--gray-bg)}hy-drawer{width:100%;position:relative;overflow:hidden;display:block;z-index:4}@media screen and (min-width: 64em){hy-drawer{position:fixed;width:21rem;top:0;left:0;bottom:0;margin-left:0}hy-drawer.cover{position:relative;width:100%}}@media screen and (min-width: 1664px){hy-drawer{width:calc(50% - 31rem)}}.sidebar{position:relative;display:flex;justify-content:center;align-items:center;color:rgba(255,255,255,0.75);text-align:center;min-height:100vh}.sidebar.invert{color:rgba(32,32,32,0.75)}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2);text-decoration-color:rgba(255,255,255,0.2)}.sidebar.invert a{color:#222;border-bottom-color:rgba(32,32,32,0.2);text-decoration-color:rgba(32,32,32,0.2)}.sidebar-bg{position:absolute;top:0;left:calc(50% - 50vw);width:100vw;height:100%;background:#202020 center / cover}.sidebar-bg::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.05)}.sidebar-bg.sidebar-overlay::after{background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 50%, rgba(32,32,32,0) 100%)}.sidebar-sticky{position:relative;z-index:3;max-width:21rem;padding:1.5rem;contain:content}.sidebar-about .avatar{margin-bottom:1.5rem}.sidebar-about>a.sidebar-title{text-decoration:none}.sidebar-about>a.sidebar-title>h2{margin:0;padding-bottom:.5rem}.sidebar-about>a.sidebar-title::after{content:'';display:block;border-bottom:2px solid;margin:0 auto .5rem;width:4rem;border-color:rgba(255,255,255,0.2);transition:border-color 250ms}.sidebar-about>a.sidebar-title:hover::after{border-color:#fff;transition:border-color 50ms}.sidebar.invert .sidebar-about>a.sidebar-title::after{border-color:rgba(32,32,32,0.2)}.sidebar.invert .sidebar-about>a.sidebar-title:hover::after{border-color:#222}.sidebar-nav>ul{list-style:none;padding-left:0}.sidebar-nav-item{display:inline-block;margin-bottom:.5rem}@media (min-width: 64em){#_main.no-drawer #_menu{display:none}#_main.no-drawer .nav-btn-bar>:nth-child(2){border:none}}.sidebar-social>ul{display:inline-block;list-style:none;padding-left:0;margin-bottom:0}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.4rem;width:3rem;height:4rem;padding:.5rem 0;line-height:3rem;text-decoration:none;border-bottom-width:2px;border-bottom-style:solid}.sidebar-social>ul li+li{margin-top:0}.fixed-common,.fixed-bottom,.fixed-top{position:fixed;left:0;width:100%;z-index:2}.fixed-top{top:0}.fixed-bottom{bottom:0}.navbar>.content{position:relative;padding-top:0;padding-bottom:0;min-height:0;max-height:5rem}.nav-btn-bar{margin:0 -1rem;background-color:white;background-color:var(--body-bg);height:5rem;display:flex;align-items:center;position:relative}.nav-btn-bar>:first-child,.nav-btn-bar>:last-child{border:none}.nav-btn{background:none;border:none;text-decoration:none;display:flex;align-items:center;justify-content:center;width:3.25rem;height:5rem;color:var(--menu-text);border-right:1px solid var(--border-color);border-left:1px solid var(--border-color);margin-left:-1px}#markdown-toc{margin:2rem -1rem 2rem calc(-1rem + 1px);padding-left:2.5rem;padding-bottom:.5rem}#markdown-toc:before{left:1rem}@media screen and (min-width: 1664px){body:not(.no-toc) #markdown-toc{position:absolute;z-index:4;width:20.5rem;right:0;margin:auto;overflow:auto}}@media screen and (min-width: 1664px){body.no-break-layout:not(.no-toc) #markdown-toc{width:calc(50% - 31rem)}}.content{margin-left:auto;margin-right:auto;padding:8rem 1rem 12rem}@media screen{.content{padding-left:1.5rem;min-height:100vh}}@media screen and (min-width: 42em){.content{max-width:42rem}}@media screen and (min-width: 54em){.content{max-width:48rem}}@media screen and (min-width: 64em){.content{padding-left:1rem;margin-left:24rem;margin-right:3rem}}@media screen and (min-width: 86em){.content{padding-top:9rem;margin-left:25rem;margin-right:4rem;max-width:54rem}}@media screen and (min-width: 1664px){.content{margin:auto}}.large-only{display:none}@media screen and (min-width: 1664px){.large-only{display:block}}.avatar{width:7rem;height:7rem;border-radius:100%;overflow:hidden;display:inline-block}.avatar img{width:100%}.content .avatar{float:right;box-sizing:content-box;border:1rem solid var(--body-bg);transition:border-color 1s ease;margin-top:-1.5rem;margin-right:-1rem}.note:before{content:"Note"}.page>header>.note-sm:before,.page>header>.note:before,.page>header>#markdown-toc:before{content:"Description"}#markdown-toc:before{content:"Table of Contents"}.layout-resume .note-sm:before,.layout-resume .note:before,.layout-resume #markdown-toc:before{content:"Summary"}</style><link rel="preload" as="style" href="/assets/css/hydejack-9.1.4.css" id="_stylePreload"><link rel="preload" as="style" href="/assets/icomoon/style.css" id="_iconsPreload"> <script> setRel('_stylePreload'); setRel('_iconsPreload'); /**/ </script> <noscript><link rel="stylesheet" href="/assets/css/hydejack-9.1.4.css"><link rel="stylesheet" href="/assets/icomoon/style.css"> </noscript><style id="_pageStyle"> html{--accent-color: #ccc;--accent-color-faded: rgba(204,204,204,0.5);--accent-color-highlight: rgba(204,204,204,0.1);--accent-color-darkened: #b9b9b9;--theme-color: #ccc}</style><!--<![endif]--> <!-- Code used for embedding Gumroad on the Hydejack Site. Left here for reference, feel free to delete. --><link rel="dns-prefetch" href="https://assets.gumroad.com"> <script>window.GET_CLAPS_API = 'https://worker.getclaps.dev'</script> <script type="module"> const ppiData = window._ppiData = fetch('https://hydejack-ppi.qwtel.workers.dev', { mode: 'cors'}).then(res => res.json()).catch(() => ({})); const promisify = f => x => new Promise(r => f(x).addEventListener('load', r)); const loadJS = promisify(window.loadJS); { let p; document.querySelector('hy-push-state').addEventListener('load', () => { const io = new IntersectionObserver(async (entries) => { if (entries.some(x => x.isIntersecting)) { p = p || loadJS('https://gumroad.com/js/gumroad-embed.js'); const [{ code }] = await Promise.all([ppiData, p]); document.querySelectorAll('.gumroad-product-embed').forEach(el => { if (!el.dataset.gumroadParams) { el.dataset.gumroadParams = 'offer_code=' + (code || 'qr0tw8m'); } }); if (!window.GumroadEmbed) { await new Promise(function check1(res) { if ('createGumroadEmbed' in window) res(window.createGumroadEmbed()); else setTimeout(() => check1(res), 200); }); } await new Promise(function check2(res) { if ('GumroadEmbed' in window) res(GumroadEmbed.reload()); else setTimeout(() => check2(res), 200); }); } }, { rootMargin: '1440px' }); document.querySelectorAll('.gumroad-product-embed').forEach(el => io.observe(el)); }); } { let p; document.querySelector('hy-push-state').addEventListener('load', () => { const io = new IntersectionObserver(async (entries) => { if (entries.some(x => x.isIntersecting)) { p = p || loadJS('https://gumroad.com/js/gumroad.js'); const [{ code }] = await Promise.all([ppiData, p]); if (code) { document.querySelectorAll('.gumroad-button').forEach(el => { if (!el.href.endsWith(code)) { el.href = el.href + '/' + (code || 'qr0tw8m'); } }); } if (!window.GumroadOverlay) { await new Promise(function check(res) { if ('createGumroadOverlay' in window) res(window.createGumroadOverlay()); else setTimeout(() => check(res), 200); }); } } }, { rootMargin: '300px' }); document.querySelectorAll('.gumroad-button').forEach(el => io.observe(el)); }); } </script><body class="dark-mode no-break-layout"> <hy-push-state id="_pushState" replace-selector="#_main" link-selector="a[href]:not([href^='/assets/']):not(.external):not(.no-push-state)" script-selector="script" duration="500" hashchange ><div id="_navbar" class="navbar fixed-top"><div class="content"> <span class="sr-only">Jump to:</span><div class="nav-btn-bar"> <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a><div class="nav-span"></div></div></div></div><hr class="sr-only" hidden /><main id="_main" class="content layout-post" role="main" ><nav id="breadcrumbs" class="screen-only"><ul><li><a href="/">home</a><li> <span>/</span> <a href="/qt/">qt</a><li> <span>/</span> <a href="/qt/c/">c</a><li> <span>/</span> <a href="/qt/c/c++/">c++</a><li> <span>/</span> <a href="/qt/c/c++/c%20tutorials/">c%20tutorials</a><li> <span>/</span> <span>2021-qtcmd</span></ul></nav><article id="post-qt-c-c++-c%20tutorials-qtcmd" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> Run a CMD command in Qt without displaying the CMD window</h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2021-06-25T00:00:00+08:00">25 Jun 2021</time> in <a href="/qt/" class="flip-title">Qt</a> / <a href="/c/" class="flip-title">C/C++</a> / <a href="/ctutorial/" class="flip-title">C Tutorials</a> on <span>Qt</span>, <span>C/c++</span>, <span>C tutorials</span> </span></div><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="/assets/img/blog/qt-cmd/qt-logo.png" alt="Run a CMD command in Qt without displaying the CMD window" width="864" height="486" loading="lazy" /></div><p class="note-sm" > It’s necessary to execute system commands sometime. system() is the most basic, it’s easy but cannot hide the black command line window, its options are not much enough. Here’re some better ways.</header><hr /><h2 id="method-1-system">Method 1: system</h2><p>​ It’s the most basic method not only used in Qt, you should include the library <code class="language-plaintext highlighter-rouge">stdlib.h</code>.<p>​ <em>But, you have to see the ugly black cmd window.</em><table><thead><tr><th style="text-align: center">Header<tbody><tr><td style="text-align: center">stdlib.h</table><h3 id="syntax">Syntax</h3><div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">system</span> <span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">command</span><span class="p">);</span>
</code></pre></div></div><h3 id="parameters">Parameters</h3><p><code class="language-plaintext highlighter-rouge">command</code>:<p>​ C-string containing the system command to be executed. Or, alternatively, a <em>null pointer</em>, to check for a command processor.<h3 id="return-value">Return Value</h3><p>​ If command is a null pointer, the function returns a non-zero value in case a <em>command processor</em> is available and a zero value if it is not. If command is not a null pointer, the value returned depends on the system and library implementations, but it is generally expected to be the status code returned by the called command, if supported.<h3 id="example">Example</h3><div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/******example: ping******/</span>
<span class="cp">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"checking processor</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">system</span><span class="p">(</span><span class="nb">NULL</span><span class="p">))</span> <span class="n">puts</span> <span class="p">(</span><span class="s">"Ok"</span><span class="p">);</span>
    	<span class="k">else</span> <span class="n">exit</span> <span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"start ping</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
	<span class="n">system</span><span class="p">(</span><span class="s">"ping localhost &gt;&gt; res.txt"</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>​ You can see the ping’s result in <code class="language-plaintext highlighter-rouge">res.txt</code> after running these code.<p><strong><em>Is here some method I can take to avoid displaying the cmd window? The answer is: YES.</em></strong><h2 id="method-2-winexec--without-cmd-window">Method 2： WinExec – without cmd window</h2><p>​ <code class="language-plaintext highlighter-rouge">WinExec()</code> is another way to run a command, the advantage of using <code class="language-plaintext highlighter-rouge">WinExec()</code> is you don’t need to display the window, it means, you can hide the window. It needs <code class="language-plaintext highlighter-rouge">winbase.h</code> &amp; <code class="language-plaintext highlighter-rouge">windows.h</code>.<p>​ <strong>BUT</strong>, this function is provided only for compatibility with 16-bit Windows. Applications should use the <code class="language-plaintext highlighter-rouge">CreateProcess()</code> function(as follows).<table><thead><tr><th style="text-align: center">Header<tbody><tr><td style="text-align: center">windows.h<br />winbase.h</table><h3 id="syntax-1">Syntax</h3><div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">UINT</span> <span class="nf">WinExec</span><span class="p">(</span>
  <span class="n">LPCSTR</span> <span class="n">lpCmdLine</span><span class="p">,</span>
  <span class="n">UINT</span>   <span class="n">uCmdShow</span>
<span class="p">);</span>
</code></pre></div></div><h3 id="parameters-1">Parameters</h3><p><code class="language-plaintext highlighter-rouge">lpCmdLine</code>:<p>​ The command line (file name plus optional parameters) for the application to be executed.<p><code class="language-plaintext highlighter-rouge">uCmdShow</code>:<p>​ The display options.<p>​ List of the acceptable values:<table><thead><tr><th style="text-align: left">Value<th style="text-align: left">Meaning<tbody><tr><td style="text-align: left"><strong>SW_HIDE</strong> 0<td style="text-align: left">Hides the window and activates another window.<tr><td style="text-align: left"><strong>SW_SHOWNORMAL</strong> <strong>SW_NORMAL</strong> 1<td style="text-align: left">Activates and displays a window. If the window is minimized or maximized, the system restores it to its original size and position. An application should specify this flag when displaying the window for the first time.<tr><td style="text-align: left"><strong>SW_SHOWMINIMIZED</strong> 2<td style="text-align: left">Activates the window and displays it as a minimized window.<tr><td style="text-align: left"><strong>SW_SHOWMAXIMIZED</strong> <strong>SW_MAXIMIZE</strong> 3<td style="text-align: left">Activates the window and displays it as a maximized window.<tr><td style="text-align: left"><strong>SW_SHOWNOACTIVATE</strong> 4<td style="text-align: left">Displays a window in its most recent size and position. This value is similar to <strong>SW_SHOWNORMAL</strong>, except that the window is not activated.<tr><td style="text-align: left"><strong>SW_SHOW</strong> 5<td style="text-align: left">Activates the window and displays it in its current size and position.<tr><td style="text-align: left"><strong>SW_MINIMIZE</strong> 6<td style="text-align: left">Minimizes the specified window and activates the next top-level window in the Z order.<tr><td style="text-align: left"><strong>SW_SHOWMINNOACTIVE</strong> 7<td style="text-align: left">Displays the window as a minimized window. This value is similar to <strong>SW_SHOWMINIMIZED</strong>, except the window is not activated.<tr><td style="text-align: left"><strong>SW_SHOWNA</strong> 8<td style="text-align: left">Displays the window in its current size and position. This value is similar to <strong>SW_SHOW</strong>, except that the window is not activated.<tr><td style="text-align: left"><strong>SW_RESTORE</strong> 9<td style="text-align: left">Activates and displays the window. If the window is minimized or maximized, the system restores it to its original size and position. An application should specify this flag when restoring a minimized window.<tr><td style="text-align: left"><strong>SW_SHOWDEFAULT</strong> 10<td style="text-align: left">Sets the show state based on the <strong>SW_</strong> value specified in the <code class="language-plaintext highlighter-rouge">STARTUPINFO</code> structure passed to the <code class="language-plaintext highlighter-rouge">CreateProcess()</code> function by the program that started the application.<tr><td style="text-align: left"><strong>SW_FORCEMINIMIZE</strong> 11<td style="text-align: left">Minimizes a window, even if the thread that owns the window is not responding. This flag should only be used when minimizing windows from a different thread.</table><h3 id="return-value-1">Return value</h3><p>​ If the function succeeds, the return value is greater than 31.<p>​ If the function fails, the return value is one of the following error values.<table><thead><tr><th>Return code/value<th>Description<tbody><tr><td>0<td>The system is out of memory or resources.<tr><td><strong>ERROR_BAD_FORMAT</strong><td>The .exe file is invalid.<tr><td><strong>ERROR_FILE_NOT_FOUND</strong><td>The specified file was not found.<tr><td><strong>ERROR_PATH_NOT_FOUND</strong><td>The specified path was not found.</table><h3 id="example-1">Example</h3><div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/******example: ping******/</span>
<span class="cp">#include &lt;stdio.h&gt;
#include &lt;windows.h&gt;
#include &lt;winbase.h&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"start ping</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
	<span class="n">WinExec</span><span class="p">(</span><span class="s">"cmd.exe /c ping localhost &gt;&gt; res.txt"</span><span class="p">,</span> <span class="n">SW_HIDE</span><span class="p">);</span>	
	<span class="cm">/*
	'/c' can't be ignored as you have arguments after 'cmd.exe'
	*/</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>​ With this function you cannot determine whether the command is completed, because it is executed asynchronously.<p>​ You must use <code class="language-plaintext highlighter-rouge">CreateProcess()</code> to solve the problem.<h2 class="note" id="method-3-createprocess--without-cmd-window">Method 3: CreateProcess – without cmd window</h2><p>​ This function is used to run a new program. It creates a new process and its primary thread. The new process executes the specified executable file.<table><thead><tr><th style="text-align: right">Header<tbody><tr><td style="text-align: right">windows.h</table><h3 id="syntax-2">Syntax</h3><div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">BOOL</span> <span class="nf">CreateProcess</span><span class="p">(</span> 
	<span class="n">LPCWSTR</span> <span class="n">lpszImageName</span><span class="p">,</span> 
	<span class="n">LPCWSTR</span> <span class="n">lpszCmdLine</span><span class="p">,</span> 
	<span class="n">LPSECURITY_ATTRIBUTES</span> <span class="n">lpsaProcess</span><span class="p">,</span> 
	<span class="n">LPSECURITY_ATTRIBUTES</span> <span class="n">lpsaThread</span><span class="p">,</span> 
	<span class="n">BOOL</span> <span class="n">fInheritHandles</span><span class="p">,</span> 
	<span class="n">DWORD</span> <span class="n">fdwCreate</span><span class="p">,</span> 
	<span class="n">LPVOID</span> <span class="n">lpvEnvironment</span><span class="p">,</span> 
	<span class="n">LPWSTR</span> <span class="n">lpszCurDir</span><span class="p">,</span> 
	<span class="n">LPSTARTUPINFOW</span> <span class="n">lpsiStartInfo</span><span class="p">,</span> 
	<span class="n">LPPROCESS_INFORMATION</span> <span class="n">lppiProcInfo</span>
<span class="p">);</span> 
</code></pre></div></div><h3 id="parameters-2">Parameters</h3><p><code class="language-plaintext highlighter-rouge">lpszImageName</code>: Pointer to a null-terminated string that specifies the module to execute.<p>​ The string can specify the full path and filename of the module to execute or it can specify a partial path and filename.<p>​ The <code class="language-plaintext highlighter-rouge">lpszImageName</code> parameter must be non-NULL and must include the module name.<p><code class="language-plaintext highlighter-rouge">lpszCmdLine</code>: Pointer to a null-terminated string that specifies the command line to execute. The system adds a null character to the command line, trimming the string if necessary, to indicate which file was actually used.<p>​ The <code class="language-plaintext highlighter-rouge">lpszCmdLine</code> parameter can be NULL. In that case, the function uses the string pointed to by <code class="language-plaintext highlighter-rouge">lpszImageName</code> as the command line.<p>​ If both <code class="language-plaintext highlighter-rouge">lpszImageName</code> and <code class="language-plaintext highlighter-rouge">lpszCmdLine</code> are non-NULL, <code class="language-plaintext highlighter-rouge">*lpszImageName</code> specifies the module to execute, and <code class="language-plaintext highlighter-rouge">*lpszCmdLine</code> specifies the command line. C runtime processes can use the <code class="language-plaintext highlighter-rouge">argc</code> and <code class="language-plaintext highlighter-rouge">argv </code>arguments.<p>​ If the filename does not contain an extension, .EXE is assumed. If the filename ends in a period (.) with no extension, or the filename contains a path, .EXE is not appended.<p><code class="language-plaintext highlighter-rouge">lpsaProcess</code>: Process safety attributes<p><code class="language-plaintext highlighter-rouge">lpsaThread</code>: Thread safety attributes<p><code class="language-plaintext highlighter-rouge">fInheritHandles</code>: Whether to inherit the attributes of the parent process<p><code class="language-plaintext highlighter-rouge">fdwCreate</code>: Specifies additional flags that control the priority class and the creation of the process. The following creation flags can be specified in any combination, except as noted:<table><thead><tr><th>Value<th>Description<tbody><tr><td>CREATE_DEFAULT_ERROR_MODE<td>Not supported.<tr><td>CREATE_NEW_CONSOLE<td>The new process has a new console, instead of inheriting the parent’s console. This flag cannot be used with the DETACHED_PROCESS flag.<tr><td>CREATE_NEW_PROCESS_GROUP<td>Not supported.<tr><td>CREATE_SEPARATE_WOW_VDM<td>Not supported.<tr><td>CREATE_SHARED_WOW_VDM<td>Not supported.<tr><td>CREATE_SUSPENDED<td>The primary thread of the new process is created in a suspended state, and does not run until the <code class="language-plaintext highlighter-rouge">ResumeThread</code> function is called.<tr><td>CREATE_UNICODE_ENVIRONMENT<td>Not supported.<tr><td>DEBUG_PROCESS<td>If this flag is set, the calling process is treated as a debugger, and the new process is a process being debugged. Child processes of the new process are also debugged. The system notifies the debugger of all debug events that occur in the process being debugged.<tr><td> <td>If you create a process with this flag set, only the calling thread (the thread that called CreateProcess) can call the <code class="language-plaintext highlighter-rouge">WaitForDebugEvent</code> function.<tr><td>DEBUG_ONLY_THIS_PROCESS<td>If this flag is set, the calling process is treated as a debugger, and the new process is a process being debugged. No child processes of the new process are debugged. The system notifies the debugger of all debug events that occur in the process being debugged.<tr><td>DETACHED_PROCESS<td>Not supported.</table><p><code class="language-plaintext highlighter-rouge">lpvEnvironment</code>: Pointer to current environment.<p><code class="language-plaintext highlighter-rouge">lpszCurDir</code>: Pointer to current directory.<p><code class="language-plaintext highlighter-rouge">lpsiStartInfo</code>: Pointer to STARTUPINFO structure<p><code class="language-plaintext highlighter-rouge">lppiProcInfo</code>: Pointer to a PROCESS_INFORMATION structure that receives identification information about the new process.<h3 id="example-2">Example</h3><p>Here’s the Microsoft’s example:<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;
#include &lt;tchar.h&gt;
</span>
<span class="kt">void</span> <span class="nf">_tmain</span><span class="p">(</span> <span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">TCHAR</span> <span class="o">*</span><span class="n">argv</span><span class="p">[]</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">STARTUPINFO</span> <span class="n">si</span><span class="p">;</span>
    <span class="n">PROCESS_INFORMATION</span> <span class="n">pi</span><span class="p">;</span>

    <span class="n">ZeroMemory</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">si</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">si</span><span class="p">)</span> <span class="p">);</span>
    <span class="n">si</span><span class="p">.</span><span class="n">cb</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">si</span><span class="p">);</span>
    <span class="n">si</span><span class="p">.</span><span class="n">wShowWindow</span> <span class="o">=</span> <span class="n">SW_HIDE</span><span class="p">;</span>	<span class="c1">//hide window</span>
    <span class="n">ZeroMemory</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">pi</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span> <span class="p">);</span>

    <span class="c1">// Start the child process. </span>
    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">CreateProcess</span><span class="p">(</span> <span class="nb">NULL</span><span class="p">,</span>   <span class="c1">// No module name (use command line)</span>
        <span class="s">"cmd.exe /c ping localhost &gt;&gt; res.txt"</span><span class="p">,</span>        <span class="c1">// Command line</span>
        <span class="nb">NULL</span><span class="p">,</span>           <span class="c1">// Process handle not inheritable</span>
        <span class="nb">NULL</span><span class="p">,</span>           <span class="c1">// Thread handle not inheritable</span>
        <span class="n">FALSE</span><span class="p">,</span>          <span class="c1">// Set handle inheritance to FALSE</span>
        <span class="mi">0</span><span class="p">,</span>              <span class="c1">// No creation flags</span>
        <span class="nb">NULL</span><span class="p">,</span>           <span class="c1">// Use parent's environment block</span>
        <span class="nb">NULL</span><span class="p">,</span>           <span class="c1">// Use parent's starting directory </span>
        <span class="o">&amp;</span><span class="n">si</span><span class="p">,</span>            <span class="c1">// Pointer to STARTUPINFO structure</span>
        <span class="o">&amp;</span><span class="n">pi</span> <span class="p">)</span>           <span class="c1">// Pointer to PROCESS_INFORMATION structure</span>
    <span class="p">)</span> 
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span> <span class="s">"CreateProcess failed (%d).</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">GetLastError</span><span class="p">()</span> <span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Wait until child process exits.</span>
    <span class="n">WaitForSingleObject</span><span class="p">(</span> <span class="n">pi</span><span class="p">.</span><span class="n">hProcess</span><span class="p">,</span> <span class="n">INFINITE</span> <span class="p">);</span>

    <span class="c1">// Close process and thread handles. </span>
    <span class="n">CloseHandle</span><span class="p">(</span> <span class="n">pi</span><span class="p">.</span><span class="n">hProcess</span> <span class="p">);</span>
    <span class="n">CloseHandle</span><span class="p">(</span> <span class="n">pi</span><span class="p">.</span><span class="n">hThread</span> <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="method-4-qprocess--without-cmd-window">Method 4： QProcess – without cmd window</h2><p>The QProcess class is used to start external programs and to communicate with them. It’s a modern method to run a command.<table><thead><tr><th>Header<th style="text-align: right">QProcess<tbody><tr><td>qmake<td style="text-align: right">QT += core</table><h3 id="examples">Examples</h3><div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">QProcess</span> <span class="nf">p</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">p</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="s">"cmd"</span><span class="p">,</span> <span class="n">QStringList</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">"/c"</span><span class="o">&lt;&lt;</span><span class="s">"ping localhost &gt;&gt; res.txt"</span><span class="p">);</span>
    <span class="n">p</span><span class="p">.</span><span class="n">waitForStarted</span><span class="p">();</span>
    <span class="n">p</span><span class="p">.</span><span class="n">waitForFinished</span><span class="p">();</span>
</code></pre></div></div><p>Another way:<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">QProcess</span> <span class="nf">p</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">QString</span> <span class="n">command</span> <span class="o">=</span> <span class="s">"cmd.exe"</span><span class="p">;</span>
<span class="n">QStringList</span> <span class="n">args</span><span class="p">;</span>
<span class="n">args</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"/c"</span><span class="p">);</span>
<span class="n">args</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"ping"</span><span class="p">);</span>
<span class="n">args</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"localhost"</span><span class="p">);</span>
<span class="n">args</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"&gt;&gt;"</span><span class="p">);</span>
<span class="n">args</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">"res.txt"</span><span class="p">);</span>

<span class="n">p</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="n">waitForFinished</span><span class="p">();</span>

<span class="c1">//p.start(command, args);</span>
<span class="c1">//p.waitForStarted();</span>
<span class="c1">//p.waitForFinished();</span>
</code></pre></div></div><h3 id="full-example">Full example:</h3><div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//file: "mainwindow.h"</span>
<span class="cp">#ifndef MAINWINDOW_H  
#define MAINWINDOW_H  
</span>
<span class="cp">#include &lt;QtGui&gt;  
</span>
<span class="k">class</span> <span class="nc">MainWindow</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QMainWindow</span>  
<span class="p">{</span>  
    <span class="n">Q_OBJECT</span>  

<span class="nl">public:</span>  
    <span class="n">MainWindow</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>  
    
    <span class="o">~</span><span class="n">MainWindow</span><span class="p">();</span>  

<span class="k">private</span> <span class="n">slots</span><span class="o">:</span>  
    <span class="kt">void</span> <span class="n">openProcess</span><span class="p">();</span> 
    
    <span class="kt">void</span> <span class="n">readResult</span><span class="p">(</span><span class="kt">int</span> <span class="n">exitCode</span><span class="p">);</span>  

<span class="nl">private:</span>  
    <span class="n">QProcess</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>  
<span class="p">};</span>  

<span class="cp">#endif // MAINWINDOW_H 
</span></code></pre></div></div><div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//file: "mainwindow.cpp"</span>
<span class="cp">#include "mainwindow.h"  
</span> 
<span class="n">MainWindow</span><span class="o">::</span><span class="n">MainWindow</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>  
    <span class="o">:</span> <span class="n">QMainWindow</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>  
<span class="p">{</span>  
    <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QProcess</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>  
    <span class="n">QPushButton</span> <span class="o">*</span><span class="n">bt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">"execute"</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>  
    <span class="n">connect</span><span class="p">(</span><span class="n">bt</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">clicked</span><span class="p">()),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">openProcess</span><span class="p">()));</span>  
<span class="p">}</span>  
 
<span class="n">MainWindow</span><span class="o">::~</span><span class="n">MainWindow</span><span class="p">()</span>  
<span class="p">{</span>  
 
<span class="p">}</span>  
 
<span class="kt">void</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">openProcess</span><span class="p">()</span>  
<span class="p">{</span>  
    <span class="n">p</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">(</span><span class="s">"cmd.exe"</span><span class="p">,</span> <span class="n">QStringList</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">"/c"</span> <span class="o">&lt;&lt;</span> <span class="s">"ping localhost &gt;&gt; res.txt"</span><span class="p">);</span>  
    <span class="n">connect</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">finished</span><span class="p">(</span><span class="kt">int</span><span class="p">)),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">readResult</span><span class="p">(</span><span class="kt">int</span><span class="p">)));</span>  
<span class="p">}</span>  
 
<span class="kt">void</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">readResult</span><span class="p">(</span><span class="kt">int</span> <span class="n">exitCode</span><span class="p">)</span>  
<span class="p">{</span>  
    <span class="k">if</span><span class="p">(</span><span class="n">exitCode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> 
    <span class="p">{</span>  
        <span class="n">QTextCodec</span><span class="o">*</span> <span class="n">gbkCodec</span> <span class="o">=</span> <span class="n">QTextCodec</span><span class="o">::</span><span class="n">codecForName</span><span class="p">(</span><span class="s">"GBK"</span><span class="p">);</span>  
        <span class="n">QString</span> <span class="n">result</span> <span class="o">=</span> <span class="n">gbkCodec</span> <span class="o">-&gt;</span> <span class="n">toUnicode</span><span class="p">(</span><span class="n">p</span> <span class="o">-&gt;</span> <span class="n">readAll</span><span class="p">());</span>   
    <span class="p">}</span>  
<span class="p">}</span>  

</code></pre></div></div><h2 id="at-last">At last</h2><p>At last, I recommand QProcess and CreateProcess.</article><hr class="dingbat related mb6" /><aside class="about related mt4 mb4" role="complementary"><div class="author mt4"> <img src="/assets/img/logo.png" srcset="/assets/img/logo.png 1x,/assets/img/logo.png 2x" alt="Theodore Cooper" class="avatar" width="120" height="120" loading="lazy" /><h2 class="page-title hr-bottom"> About</h2><blockquote><p>“Hi, there! I’m Theodore Cooper!”</blockquote><p><strong><em>A freak geek. Just for fun and freedom.</em></strong><hr /><p><del>(It’ll be thankful if you <strong>donate</strong> Bitcoin)</del><p>Buy me a cup of coffee❤️ (Bitcoin):<p><img src="/assets/img/btcqrcode.png" alt="Bitcoin" /><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zpub6oCSaTqTGnSCr1UXxg6SJtXFPLPqyebxEbPAypid1fynqwcfK1cZb7LbJg8EWs8drU27mpgqxETjLcR8gXacxPH8nYqyWtzR93oP9rEGmfX
</code></pre></div></div><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://twitter.com/T_Ccooper" title="Twitter" class="no-mark-external"> <span class="icon-twitter"></span> <span class="sr-only">Twitter</span> </a><li> <a href="https://github.com/theodorecooper" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:ccooperr2005@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></aside><aside class="related mb4" role="complementary"><h2 class="hr-bottom">Related Posts</h2><ul class="related-posts"><li class="h4"> <a href="/penetration/2021-ddos-tools/" class="flip-title"><span>Collection of the best &amp; most popular DDos-attack tools</span></a> <time class="faded fine" datetime="2021-08-10T00:00:00+08:00">10 Aug 2021</time><li class="h4"> <a href="/qt/2021-qt-libpng-warning/" class="flip-title"><span>Solve Qt: libpng warning: iCCP: known incorrect sRGB profile</span></a> <time class="faded fine" datetime="2021-07-26T00:00:00+08:00">26 Jul 2021</time><li class="h4"> <a href="/penetration/linux/2021-arp-spoofing/" class="flip-title"><span>Penetration Testing | ARP Spoofing(Poisoning) in the internal network &amp; How to prevent it</span></a> <time class="faded fine" datetime="2021-02-11T00:00:00+08:00">11 Feb 2021</time></ul></aside><aside class="comments related" role="complementary"><h2 class="hr-bottom">Comments</h2><div id="disqus_thread"></div><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> <script>!function(w, d) { if (d.getElementById("disqus_thread")) { if (w.DISQUS) { w.DISQUS.reset({ reload: true, config() { this.page.url = w.location.href; this.page.title = d.title; }, }); } else { w.disqus_config = function disqusConfig() { this.page.url = w.location.href; this.page.title = d.title; }; w.loadJSDeferred(d.getElementById("_hrefDisqus").href + '/embed.js'); } } }(window, document);</script></aside><footer class="content" role="contentinfo"><hr/><p><small class="copyright">© 2020-2021. All rights reserved. </small><hr class="sr-only"/></footer></main><hy-drawer id="_drawer" class="" side="left" threshold="10" noscroll ><header id="_sidebar" class="sidebar invert" role="banner"><div class="sidebar-bg " style="background:url('/assets/img/blog/qt-cmd/qt-logo.png') center/cover"></div><div class="sidebar-sticky"><div class="sidebar-about"> <a class="no-hover" href="/" tabindex="-1"> <img src="/assets/img/logo.png" class="avatar" alt="Theodore Cooper" width="120" height="120" loading="lazy" /> </a> <a class="sidebar-title" href="/"><h2 class="h1">Theodore Cooper</h2></a><p class=""> Talk is cheap, show me the code.</div><nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul><li> <a id="_drawer--opened" href="/" class="sidebar-nav-item " > Blog </a><li> <a href="https://github.com/theodorecooper?tab=repositories" class="sidebar-nav-item " > Projects </a><li> <a href="/about/" class="sidebar-nav-item " > About </a></ul></nav><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://twitter.com/T_Ccooper" title="Twitter" class="no-mark-external"> <span class="icon-twitter"></span> <span class="sr-only">Twitter</span> </a><li> <a href="https://github.com/theodorecooper" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:ccooperr2005@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></header></hy-drawer><hr class="sr-only" hidden /> </hy-push-state> <!--[if gt IE 10]><!----> <script nomodule>!function(){var t,n=document.createElement("script");!("noModule"in n)&&"onbeforeload"in n&&(t=!1,document.addEventListener("beforeload",function(e){if(e.target===n)t=!0;else if(!e.target.hasAttribute("nomodule")||!t)return;e.preventDefault()},!0),n.type="module",n.src=".",document.head.appendChild(n),n.remove())}(); </script> <script src="/assets/js/hydejack-9.1.4.js" type="module"></script> <script src="/assets/js/LEGACY-hydejack-9.1.4.js" nomodule defer></script> <script>!function(w, d) { w.ga=w.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; /**/ if (navigator.CookiesOK) { ga('create', 'G-DZQ9LW0MKP', 'auto'); } else if (d.cookie.indexOf("hy--cookies-ok=true") > -1) { ga('create', 'G-DZQ9LW0MKP', { 'storage': 'none', 'clientId': localStorage ? localStorage.getItem('ga--client-id') : undefined }); } else { ga('create', 'G-DZQ9LW0MKP', { 'storage': 'none' }); ga('set', 'forceSSL', true); ga('set', 'anonymizeIp', true); } /**/ var pushStateEl = d.getElementById('_pushState'); var timeoutId; pushStateEl.addEventListener('hy-push-state-load', function() { w.clearTimeout(timeoutId); timeoutId = w.setTimeout(function() { ga('set', 'page', w.location.pathname); ga('send', 'pageview'); }, 500); }); d.addEventListener('hy--cookies-ok', function () { w.ga(function(tracker) { w.ga("set", "anonymizeIp", undefined); localStorage && localStorage.setItem("ga--client-id", tracker.get("clientId")); }); }); w.loadJSDeferred('https://www.google-analytics.com/analytics.js'); }(window, document);</script> <!--<![endif]--> <!-- Code for integrating CloudFlare's email protection with Hydejack's single page app loading. --> <script> document.getElementById('_pushState').addEventListener('hy-push-state-after', function (e) { function e(e){ (console.error?console.error:console.log).call(console,e) } function t(e){ return l.innerHTML='<a href="'+e.replace(/"/g,"&quot;")+'"></a>',l.childNodes[0].getAttribute("href") } function r(e,t){ var r=e.substr(t,2);return parseInt(r,16) } function n(e,n){ for(var o="",c=r(e,n),a=n+2;a<e.length;a+=2){ var l=r(e,a)^c; o+=String.fromCharCode(l) } return t(o) } var o="/cdn-cgi/l/email-protection#", c=".__cf_email__", a="data-cfemail", l=document.createElement("div"); !function(){ for(var t=document.getElementsByTagName("a"),r=0;r<t.length;r++) try{ var c=t[r],a=c.href.indexOf(o); a>-1&&(c.href="mailto:"+n(c.href,a+o.length)) }catch(t){ e(t) } }(), function(){ for(var t=document.querySelectorAll(c),r=0;r<t.length;r++) try{ var o=t[r],l=n(o.getAttribute(a),0),i=document.createTextNode(l); o.parentNode.replaceChild(i,o) }catch(t){ e(t) } }() }); </script><div hidden><h2 class="sr-only">Templates (for web app):</h2><clap-config> <clap-text at="1">Keep going!</clap-text> <clap-text at="2">Keep going ×2!</clap-text> <clap-text at="3">Give me more!</clap-text> <clap-text at="5">Thank you, thank you</clap-text> <clap-text at="7">Far too kind!</clap-text> <clap-text at="10">Never gonna give me up?</clap-text> <clap-text at="14">Never gonna let me down?</clap-text> <clap-text at="20">Turn around and desert me!</clap-text> <clap-text at="30">You're an addict!</clap-text> <clap-text at="40">Son of a clapper!</clap-text> <clap-text at="50">No way</clap-text> <clap-text at="60">Go back to work!</clap-text> <clap-text at="70">This is getting out of <em>hand</em></clap-text> <clap-text at="80">Unbelievable</clap-text> <clap-text at="90">PREPOSTEROUS</clap-text> <clap-text at="100">I N S A N I T Y</clap-text> <clap-text at="185"><span style="font-family:monospace">FEED ME A STRAY CAT</span></clap-text> </clap-config> <template id="_animation-template"><div class="animation-main fixed-top"><nav id="breadcrumbs" class="screen-only"><ul></ul></nav><div class="content"><div class="page"></div></div></div></template> <template id="_loading-template"><div class="loading nav-btn fr"> <span class="sr-only">Loading…</span> <span class="icon-cog"></span></div></template> <template id="_error-template"><div class="page"><h1 class="page-title">Error</h1><p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</div></template> <template id="_permalink-template"> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="content-hash"></span> </a> </template></div></html>
