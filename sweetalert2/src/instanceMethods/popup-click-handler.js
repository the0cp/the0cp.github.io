import{callIfFunction}from"../utils/utils.js";import{DismissReason}from"../utils/DismissReason.js";import privateProps from"../privateProps.js";export const handlePopupClick=(o,n,e)=>{privateProps.innerParams.get(o).toast?handleToastClick(o,n,e):(handleModalMousedown(n),handleContainerMousedown(n),handleModalClick(o,n,e))};const handleToastClick=(o,n,e)=>{n.popup.onclick=()=>{const n=privateProps.innerParams.get(o);n.showConfirmButton||n.showDenyButton||n.showCancelButton||n.showCloseButton||n.timer||n.input||e(DismissReason.close)}};let ignoreOutsideClick=!1;const handleModalMousedown=o=>{o.popup.onmousedown=()=>{o.container.onmouseup=function(n){o.container.onmouseup=void 0,n.target===o.container&&(ignoreOutsideClick=!0)}}},handleContainerMousedown=o=>{o.container.onmousedown=()=>{o.popup.onmouseup=function(n){o.popup.onmouseup=void 0,(n.target===o.popup||o.popup.contains(n.target))&&(ignoreOutsideClick=!0)}}},handleModalClick=(o,n,e)=>{n.container.onclick=i=>{const t=privateProps.innerParams.get(o);ignoreOutsideClick?ignoreOutsideClick=!1:i.target===n.container&&callIfFunction(t.allowOutsideClick)&&e(DismissReason.backdrop)}};