import{swalClasses,iconTypes}from"../classes.js";import{getContainer,getPopup,getContent}from"./getters.js";import{addClass,removeClass,getChildByClass,setInnerHtml}from"./domUtils.js";import{isNodeEnv}from"../isNodeEnv.js";import{error}from"../utils.js";import sweetAlert from"../../sweetalert2.js";const sweetHTML=`\n <div aria-labelledby="${swalClasses.title}" aria-describedby="${swalClasses.content}" class="${swalClasses.popup}" tabindex="-1">\n   <div class="${swalClasses.header}">\n     <ul class="${swalClasses["progress-steps"]}"></ul>\n     <div class="${swalClasses.icon} ${iconTypes.error}"></div>\n     <div class="${swalClasses.icon} ${iconTypes.question}"></div>\n     <div class="${swalClasses.icon} ${iconTypes.warning}"></div>\n     <div class="${swalClasses.icon} ${iconTypes.info}"></div>\n     <div class="${swalClasses.icon} ${iconTypes.success}"></div>\n     <img class="${swalClasses.image}" />\n     <h2 class="${swalClasses.title}" id="${swalClasses.title}"></h2>\n     <button type="button" class="${swalClasses.close}"></button>\n   </div>\n   <div class="${swalClasses.content}">\n     <div id="${swalClasses.content}" class="${swalClasses["html-container"]}"></div>\n     <input class="${swalClasses.input}" />\n     <input type="file" class="${swalClasses.file}" />\n     <div class="${swalClasses.range}">\n       <input type="range" />\n       <output></output>\n     </div>\n     <select class="${swalClasses.select}"></select>\n     <div class="${swalClasses.radio}"></div>\n     <label for="${swalClasses.checkbox}" class="${swalClasses.checkbox}">\n       <input type="checkbox" />\n       <span class="${swalClasses.label}"></span>\n     </label>\n     <textarea class="${swalClasses.textarea}"></textarea>\n     <div class="${swalClasses["validation-message"]}" id="${swalClasses["validation-message"]}"></div>\n   </div>\n   <div class="${swalClasses.actions}">\n     <div class="${swalClasses.loader}"></div>\n     <button type="button" class="${swalClasses.confirm}"></button>\n     <button type="button" class="${swalClasses.deny}"></button>\n     <button type="button" class="${swalClasses.cancel}"></button>\n   </div>\n   <div class="${swalClasses.footer}"></div>\n   <div class="${swalClasses["timer-progress-bar-container"]}">\n     <div class="${swalClasses["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),resetOldContainer=()=>{const s=getContainer();return!!s&&(s.parentNode.removeChild(s),removeClass([document.documentElement,document.body],[swalClasses["no-backdrop"],swalClasses["toast-shown"],swalClasses["has-column"]]),!0)};let oldInputVal;const resetValidationMessage=s=>{sweetAlert.isVisible()&&oldInputVal!==s.target.value&&sweetAlert.resetValidationMessage(),oldInputVal=s.target.value},addInputChangeListeners=()=>{const s=getContent(),e=getChildByClass(s,swalClasses.input),a=getChildByClass(s,swalClasses.file),t=s.querySelector(`.${swalClasses.range} input`),l=s.querySelector(`.${swalClasses.range} output`),n=getChildByClass(s,swalClasses.select),i=s.querySelector(`.${swalClasses.checkbox} input`),o=getChildByClass(s,swalClasses.textarea);e.oninput=resetValidationMessage,a.onchange=resetValidationMessage,n.onchange=resetValidationMessage,i.onchange=resetValidationMessage,o.oninput=resetValidationMessage,t.oninput=s=>{resetValidationMessage(s),l.value=t.value},t.onchange=s=>{resetValidationMessage(s),t.nextSibling.value=t.value}},getTarget=s=>"string"==typeof s?document.querySelector(s):s,setupAccessibility=s=>{const e=getPopup();e.setAttribute("role",s.toast?"alert":"dialog"),e.setAttribute("aria-live",s.toast?"polite":"assertive"),s.toast||e.setAttribute("aria-modal","true")},setupRTL=s=>{"rtl"===window.getComputedStyle(s).direction&&addClass(getContainer(),swalClasses.rtl)};export const init=s=>{const e=resetOldContainer();if(isNodeEnv())return void error("SweetAlert2 requires document to initialize");const a=document.createElement("div");a.className=swalClasses.container,e&&addClass(a,swalClasses["no-transition"]),setInnerHtml(a,sweetHTML);const t="string"==typeof(l=s.target)?document.querySelector(l):l;var l;t.appendChild(a),setupAccessibility(s),setupRTL(t),addInputChangeListeners()};